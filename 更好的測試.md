我們應該如何構建測試來提高速度和可靠性。

# 網頁

  - [路線圖](路線圖 "wikilink")
  - [CI管道(CI pipelines) (Travis
    CI)](CI管道\(CI_pipelines\)_\(Travis_CI\) "wikilink")

# 術語

**單元測試(Unit tests)**
驗證程序的最小結構（如函數或方法）是否正常工作。他們應該測試給定功能中的所有分支機構，並以100％覆蓋率為目標。

**集成測試(Integration tests)**
驗證單獨的組件是否可以一起工作。例如，使用`net/http/httptest.Server`模擬驗證`jail`是否可以與`rpc.Client`一起使用。保持集成測試的快速，可靠和可預測非常重要。

**E2e測試** 驗證程序是否可以與外部系統正常工作。它應該盡可能接近生產設置。在我們的例子中，e2e測試將使用任何公共測試網。

# 測試類型

![03-Piramides-03-03.png](03-Piramides-03-03.png
"03-Piramides-03-03.png")

## 單元測試(Unit tests)

**特性**

  - 防止錯誤的第一道防線
  - 閃電很快
  - 許多小功能，每個功能都有一個測試案例
  - 僅包含自己包內的代碼
  - 每個階段的CI的強制性部分

**何時撰寫**

  - 當你引入一個新的功能
  - 為現有功能添加功能
  - 修改現有的功能

**何時執行**

  - 在任何代碼改變之後
  - 在每個持續整合(CI)作業中

## 組件/集成/API測試

**功能**

  - 驗證組件可以相互協作
  - 重用mocks
  - 執行很快
  - 不需要外部系統
  - 每個階段的CI的強制性部分

**何時撰寫**

  - 一個組件獲得了新的導出函數
  - 現有的導出函數/結構/接口改變了它的形狀或邏輯

**何時執行**

  - 在提交之前
  - 在每個CI作業中

## e2e測試（圖像中的GUI）

**特性**

  - 驗證是否符合其他系統
  - 需要更多時間

**何時撰寫**

  - 添加了新的系統功能（例如新的協議支持）

**何時執行**

  - 在準備發布之前
  - 定期在CI工作
  - 如果需要手動

# 私有區塊鍊和CI管道(CI pipelines)

私人區塊鏈可用於e2e測試，可能是拉取請求CI管道的一部分，因為專用網絡應提供比公共測試網更高的可靠性。

公共測試網可以是發布CI管道的一部分，也可以每隔1小時定期運行一次。這個想法是，如果公共測試網不可用，它不會影響開發，但會影響發布。

[Continous Delivery](Continous_Delivery "wikilink")

[Category:Status-go](Category:Status-go "wikilink")