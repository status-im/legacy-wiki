我们应该如何构建测试来提高速度和可靠性。

# 网页

  - [路线图](路线图 "wikilink")
  - [CI管道(CI pipelines) (Travis
    CI)](CI管道\(CI_pipelines\)_\(Travis_CI\) "wikilink")

# 术语

**单元测试(Unit tests)**
验证程序的最小结构（如函数或方法）是否正常工作。他们应该测试给定功能中的所有分支机构，并以100％覆盖率为目标。

**集成测试(Integration tests)**
验证单独的组件是否可以一起工作。例如，使用`net/http/httptest.Server`模拟验证`jail`是否可以与`rpc.Client`一起使用。保持集成测试的快速，可靠和可预测非常重要。

**E2e测试** 验证程序是否可以与外部系统正常工作。它应该尽可能接近生产设置。在我们的例子中，e2e测试将使用任何公共测试网。

# 测试类型

![03-Piramides-03-03.png](03-Piramides-03-03.png
"03-Piramides-03-03.png")

## 单元测试(Unit tests)

**特性**

  - 防止错误的第一道防线
  - 闪电很快
  - 许多小功能，每个功能都有一个测试桉例
  - 仅包含自己包内的代码
  - 每个阶段的CI的强制性部分

**何时撰写**

  - 当你引入一个新的功能
  - 为现有功能添加功能
  - 修改现有的功能

**何时执行**

  - 在任何代码改变之后
  - 在每个持续整合(CI)作业中

## 组件/集成/API测试

**功能**

  - 验证组件可以相互协作
  - 重用mocks
  - 执行很快
  - 不需要外部系统
  - 每个阶段的CI的强制性部分

**何时撰写**

  - 一个组件获得了新的导出函数
  - 现有的导出函数/结构/接口改变了它的形状或逻辑

**何时执行**

  - 在提交之前
  - 在每个CI作业中

## e2e测试（图像中的GUI）

**特性**

  - 验证是否符合其他系统
  - 需要更多时间

**何时撰写**

  - 添加了新的系统功能（例如新的协议支持）

**何时执行**

  - 在准备发布之前
  - 定期在CI工作
  - 如果需要手动

# 私有区块鍊和CI管道(CI pipelines)

私人区块链可用于e2e测试，可能是拉取请求CI管道的一部分，因为专用网络应提供比公共测试网更高的可靠性。

公共测试网可以是发布CI管道的一部分，也可以每隔1小时定期运行一次。这个想法是，如果公共测试网不可用，它不会影响开发，但会影响发布。

[Continous Delivery](Continous_Delivery "wikilink")

[Category:Status-go](Category:Status-go "wikilink")